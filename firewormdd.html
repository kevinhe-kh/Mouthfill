<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>居中动态图形</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>body{margin:0;}</style>
</head>
<body>
  <script>
    let t = 0;
    let w = 400;

    function setup() {
      createCanvas(w, w);
      colorMode(RGB, 255);
    }

    function draw() {
      background(6, 96); // 深灰半透明背景
      stroke(w, 46); // 浅灰笔触
      translate(width/2, height/2); // 坐标系平移至画布中心

      t += Math.PI / 90; 
      
      for (let i = 0; i < 40000; i++) {
        const x = i % 200 - 100; // x范围-100~99（原0~199转换为以中心对称）
        const y = Math.floor(i/200) - 100; // y范围-100~99（原0~199转换为以中心对称）
        a(x, y); // 传入对称坐标
      }
    }

    function a(x, y) {
      const k = x / 8 - 12.5; 
      const e = y / 8 - 12.5; 
      const o = Math.hypot(k, e) / 12; 
      const d = 5 * Math.cos(o * Math.cos(Math.sin(k/2) * Math.cos(e/2))); 
      
      // 直接基于中心坐标系计算（无需手动+偏移值）
      const px = x + d * k * (Math.sin(d*2 + t) + Math.sin(y * o * o)/9); 
      const py = y/3 - d*40 + 19*Math.cos(d + t); 
      
      point(px, py); // 直接在中心坐标系绘制
    }
  </script>
</body>
</html>
